<!doctype html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="./src/css/app.css">
    <title>The Checklist</title>
</head>
<body>

<div id="app">
    <h1>The checklist</h1>

    <ajout @nouvellenote="ajouterNote"></ajout>
    <note v-for="todo in todos" v-bind:content="todo" @click="inverser"></note>

</div>

<script>
    const vm = Vue.createApp({
        data() {
            return {
                todos: ["Safe the world", "Learn Vue JS", "Drink a coffee"]
            }
        },
        methods: {
            inverser() {
                this.todos.reverse();
            },
            ajouterNote(message) {
                this.todos.push(message);
            }
        }
    })
    //<note>
    vm.component('note', {
        props: ['content'],
        template: `
          <p>{{ content }}</p>
        `
    })

    //<ajout>
    vm.component('ajout', {
        props: [],
        emits: ['nouvellenote'],
        data(){
            return{
                interne: 'Nouveau message'
            }
        },
        methods: {
            enregistrementNote(){
                this.$emit('nouvellenote',this.interne);
                this.interne = '';
            }
        },
        template: `
          <input type="text" v-model="interne">
          <a href="#" @click="enregistrementNote" v-if=" interne != '' ">Ajouter une note</a>
          {{ interne }}
        `
    })

    vm.mount('#app');
</script>
</body>
</html>